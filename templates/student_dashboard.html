{% extends 'after_login_base.html' %}
{% block title %}
    Dashboard
{% endblock %}
{% block content %}
    <header>
        <nav class="navbar navbar-expand-lg container-fluid shadow" id="navbar">
            <a class="navbar-brand" href="{{ url_for('home_page') }}"><img src="/static/images/website-logo.png" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span><i class="fa-solid fa-bars"></i></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav" id="navbaroptions">
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('course_registration') }}" id="coursebutton"><button type="button" class="btn btn-dark">Courses</button></a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}"><button type="button" class="btn btn-dark">Log Out</button></a></li>
                </ul>
            </div>
        </nav>
    </header>
    <main>
        <div class="main_content">
            <div id="profile_section">
                <img src="/static/images/blank-profile-picture-973460_1280.webp" height="200px" alt="">
                <div id="profile_info">
                    <h1>{{ user.full_name }}</h1>
                    <h4>Qualification : {{ user.qualification }}</h4>
                </div>
            </div>
            <div>
                <h2>Opted Courses</h2>
                <table class="table table-striped table-hover student_course_table">
                    <thead>
                        <tr>
                            <th>Subject Name</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for enrollment in enrollments %}
                            <tr>
                                <td>
                                    {% if enrollment.subject %}
                                        {{ enrollment.subject.sub_name }}
                                    {% else %}
                                        <span class="text-danger">Error: No subject found</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="{{ url_for('show_chapter',id=enrollment.subject.id) }}"><button class="btn btn-primary">Show</button></a> 
                                    <a href="{{ url_for('unregister', id=enrollment.subject.id) }}"><button class="btn btn-primary">Unregister</button></a>
                                </td>
                            </tr>
                        {% endfor %}    
                    </tbody>
                </table>
            </div>
        </div>
    </main>
{% endblock %}